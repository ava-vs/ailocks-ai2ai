# Технический долг: Ai2Ai Network

> Последнее обновление: 2025-07-08

## 1. Нереализованные задачи из **PLAN_Ailocks_Interaction**

| ID | Описание | Приоритет | Оценка времени |
|---|---|---|---|
| TD-001 | **Voice Integration (70 % ready)** — добавить AI2AI tools (`send_ailock_message`, `check_ailock_inbox`) в `VoiceAgentWidget.tsx`. | High | 3 ч |
| TD-002 | **Header Integration (50 % ready)** — интегрировать inbox badge (`unreadCount`) и кнопку открытия inbox в `AilockHeaderWidget.tsx`. | High | 2 ч |
| TD-003 | **Auto-Clarify (30 % ready)** — подключить `autoClarifyIntent` в `netlify/functions/intents-create.ts`, отправка сообщения `clarify_intent`, если данные неполные. | Medium | 3 ч |
| TD-004 | **Значок уведомления о новых сообщениях** — в верхнем углу закладки и карточек, имеющих новые сообщения, показывать значок "красная точка". | Medium | 3 ч |

## 2. Дополнительные задачи
| TD-005 | **Интент "Совещание с онлайн протоколом** — Двухэкранный плеер совещания, на втором экране в виде html отображается корректируемый текущий результат совещания (в форме SMART задач на исполнение) на основе конекста совещания и выступений участников. | High | 3 д |


| ID | Описание | Приоритет | Оценка времени |
|---|---|---|---|

| TD-006 | **Мобильная версия: In-Work Intents** — проверить и настроить корректное отображение и управление интентами в статусе *In Work* в `MobileIntentPanel.tsx` (и связанных хранилищах). |✅ Done | 4 ч |
| TD-007 | **Daily Tasks UI** — заменить захардкоженные массивы `dailyTasks` в `AilockQuickStatus.tsx` и `MyAilockPage.tsx` на данные из API `/daily-tasks`, добавить прогресс-бары и чекбоксы. |✅ Done | 1 д |
| TD-008 | **Hook XP ↔️ Daily Tasks** — убедиться, что `gainXp` корректно триггерит обновление `user_tasks` и отправку уведомлений. | ✅ Done | 0.5 д |
| TD-009 | **Сообщения между Айлоками** — только автор и адресат сообщения должны видеть сообщения в карточке интента | High | 0.5 д |
| TD-010 | **Real-time Task Notifications** — реализовать WebSocket/SSE поток `ailock-notification` и отображение Toast-уведомлений при завершении ежедневок. | High | 0.5 д |
| TD-011 | **InteractiveOnboarding.tsx** — разработать компонент пошагового онбординга, использующий задачи категории `onboarding` для обучения пользователя. | Medium | 2 д |
| TD-012 | **Claim Task Endpoint** — создать Netlify Function `/claim-task` + UI кнопку «Забрать награду» для заданий с ручным `claim`. | Low | 0.5 д |

## 3. Общие рекомендации
1. Каждую задачу сопровождать unit/E2E-тестами минимального покрытия.
2. Фиксировать время выполнения для последующего анализа точности оценок.
3. При закрытии задачи обязательно обновлять документацию и этот файл. 

## 4. Приоритезация текущего техдолга

_Ниже приведён сводный рейтинг задач по модели RICE (Reach × Impact ÷ Effort)._  

| Ранг | ID | Причина приоритета |
|---|---|---|
| 1 | TD-001 | Блокирует голосовой UX и wow-эффект, низкие трудозатраты |
| 2 | TD-002 | Улучшает видимость AI2AI общения, напрямую влияет на retention |
| 3 | TD-003 | Повышает конверсию интентов, снижает ручной ввод |
| 4 | TD-009 | Корректная приватность сообщений, критично для trust |
| 5 | TD-010 | Немедленная обратная связь о daily-tasks, повышает engagement |

Остальные задачи остаются **Medium** или **Low** приоритета.  
Регулярный пересмотр ― 1 раз в спринт.

## 5. Будущее: Интерактивное обучение

| ID | Описание | Приоритет | Оценка времени |
|---|---|---|---|
| TD-013 | **Interactive Learning Architecture** — спроектировать поток обучения (события, состояния, API), описать в ADR-документе. | High | 1 д |
| TD-014 | **Migration: Onboarding Tasks** — добавить `onboarding_*` и `tutorial_*` в `task_definitions`, seed-скрипт. | High | 0.5 д |
| TD-015 | **Component `InteractiveOnboarding.tsx`** — MVP UI-компонента шаг-за-шагом (создание интента, отправка AI2AI, апгрейд навыка). | Medium | 2 д |
| TD-016 | **Progress Persistence & XP Hooks** — хранить прогресс в `user_tasks`, триггер `gainXp('tutorial_step_completed')`. | Medium | 1 д |
| TD-017 | **Gamified UI Enhancements** — анимации, подсказки, toast-XP во время обучения. | Low | 1 д |
| TD-018 | **Feature Flag & Analytics** — флаг `FT_INTERACTIVE_ONBOARDING`, A/B эксперимент, метрики D1/D7 retention. | Low | 0.5 д | 